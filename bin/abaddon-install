#!/bin/sh

# Instalar paquetes necesarios
doas pkg_add gcc cmake gtk3mm atk2mm g++ sqlite libhandy glib2mm c++ nlohmann-json libwebsockets spdlog

# Clonar el repositorio
git clone https://github.com/uowuo/abaddon.git ~/.local/src/abaddon

# Actualizar submódulos
cd ~/.local/src/abaddon && git submodule update --init --recursive

# Construir el proyecto
mkdir build && cd build
cmake -GNinja ..
ninja
doas ninja install

# Crear enlaces simbólicos a los recursos
cd ~/.local/src/abaddon
ln -s ./res/css ./css
ln -s ./res/res ./res
ln -s ./res/fonts ./fonts

# Modificar los archivos de estilo CSS
sed -i -e 's/141414/222222/g' -e 's/111111/1F1F1F/g' ./res/css/main.css
